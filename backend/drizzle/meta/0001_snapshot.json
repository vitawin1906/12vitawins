{
  "id": "1ebff472-563a-440d-8c25-c62d8eb14608",
  "prevId": "1a352942-51ae-4b49-87ef-4936c3f8da0a",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.achievement": {
      "name": "achievement",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reward_vwc": {
          "name": "reward_vwc",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ux_achievement_code": {
          "name": "ux_achievement_code",
          "columns": [
            {
              "expression": "code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_achievement_active": {
          "name": "ix_achievement_active",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.achievement_user": {
      "name": "achievement_user",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "achievement_id": {
          "name": "achievement_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "granted_at": {
          "name": "granted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ux_achievement_user": {
          "name": "ux_achievement_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "achievement_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_achievement_user_user": {
          "name": "ix_achievement_user_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_achievement_user_ach": {
          "name": "ix_achievement_user_ach",
          "columns": [
            {
              "expression": "achievement_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "achievement_user_user_id_app_user_id_fk": {
          "name": "achievement_user_user_id_app_user_id_fk",
          "tableFrom": "achievement_user",
          "tableTo": "app_user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "achievement_user_achievement_id_achievement_id_fk": {
          "name": "achievement_user_achievement_id_achievement_id_fk",
          "tableFrom": "achievement_user",
          "tableTo": "achievement",
          "columnsFrom": [
            "achievement_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.activation_package": {
      "name": "activation_package",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "amount_rub": {
          "name": "amount_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ix_activation_package_user": {
          "name": "ix_activation_package_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_activation_package_type": {
          "name": "ix_activation_package_type",
          "columns": [
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_activation_package_created": {
          "name": "ix_activation_package_created",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "activation_package_user_id_app_user_id_fk": {
          "name": "activation_package_user_id_app_user_id_fk",
          "tableFrom": "activation_package",
          "tableTo": "app_user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "chk_activation_package_type": {
          "name": "chk_activation_package_type",
          "value": "\"activation_package\".\"type\" IN ('partner', 'partner_pro')"
        },
        "chk_activation_package_amount": {
          "name": "chk_activation_package_amount",
          "value": "\"activation_package\".\"amount_rub\" > 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.address": {
      "name": "address",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "address": {
          "name": "address",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "city": {
          "name": "city",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "state": {
          "name": "state",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "zip": {
          "name": "zip",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "country": {
          "name": "country",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'Россия'"
        },
        "type": {
          "name": "type",
          "type": "address_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ix_address_user": {
          "name": "ix_address_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_address_user_default": {
          "name": "ix_address_user_default",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "is_default",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ux_address_user_default_true": {
          "name": "ux_address_user_default_true",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"address\".\"is_default\" = true",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "address_user_id_app_user_id_fk": {
          "name": "address_user_id_app_user_id_fk",
          "tableFrom": "address",
          "tableTo": "app_user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.admin_audit_log": {
      "name": "admin_audit_log",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "who_user_id": {
          "name": "who_user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "who_telegram_id": {
          "name": "who_telegram_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "scope": {
          "name": "scope",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "old_value": {
          "name": "old_value",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "new_value": {
          "name": "new_value",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ix_admin_audit_who_user": {
          "name": "ix_admin_audit_who_user",
          "columns": [
            {
              "expression": "who_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_admin_audit_who_tg": {
          "name": "ix_admin_audit_who_tg",
          "columns": [
            {
              "expression": "who_telegram_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_admin_audit_scope_time": {
          "name": "ix_admin_audit_scope_time",
          "columns": [
            {
              "expression": "scope",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_admin_audit_scope_action": {
          "name": "ix_admin_audit_scope_action",
          "columns": [
            {
              "expression": "scope",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "action",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "admin_audit_log_who_user_id_app_user_id_fk": {
          "name": "admin_audit_log_who_user_id_app_user_id_fk",
          "tableFrom": "admin_audit_log",
          "tableTo": "app_user",
          "columnsFrom": [
            "who_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.admin_user_role": {
      "name": "admin_user_role",
      "schema": "",
      "columns": {
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "rbac_role",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "granted_at": {
          "name": "granted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "ix_admin_user_role_role": {
          "name": "ix_admin_user_role_role",
          "columns": [
            {
              "expression": "role",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "admin_user_role_user_id_app_user_id_fk": {
          "name": "admin_user_role_user_id_app_user_id_fk",
          "tableFrom": "admin_user_role",
          "tableTo": "app_user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "pk_admin_user_role": {
          "name": "pk_admin_user_role",
          "columns": [
            "user_id",
            "role"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.airdrop_task": {
      "name": "airdrop_task",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "trigger": {
          "name": "trigger",
          "type": "airdrop_trigger",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "reward_vwc": {
          "name": "reward_vwc",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ux_airdrop_task_code": {
          "name": "ux_airdrop_task_code",
          "columns": [
            {
              "expression": "code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_airdrop_task_active": {
          "name": "ix_airdrop_task_active",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.airdrop_user_action": {
      "name": "airdrop_user_action",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "task_id": {
          "name": "task_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "payload": {
          "name": "payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "verified": {
          "name": "verified",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "verified_at": {
          "name": "verified_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ux_airdrop_user_task": {
          "name": "ux_airdrop_user_task",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "task_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_airdrop_action_user": {
          "name": "ix_airdrop_action_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_airdrop_action_task": {
          "name": "ix_airdrop_action_task",
          "columns": [
            {
              "expression": "task_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_airdrop_action_verified": {
          "name": "ix_airdrop_action_verified",
          "columns": [
            {
              "expression": "verified",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "airdrop_user_action_user_id_app_user_id_fk": {
          "name": "airdrop_user_action_user_id_app_user_id_fk",
          "tableFrom": "airdrop_user_action",
          "tableTo": "app_user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "airdrop_user_action_task_id_airdrop_task_id_fk": {
          "name": "airdrop_user_action_task_id_airdrop_task_id_fk",
          "tableFrom": "airdrop_user_action",
          "tableTo": "airdrop_task",
          "columnsFrom": [
            "task_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.analytics_tag": {
      "name": "analytics_tag",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "head_code": {
          "name": "head_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "body_code": {
          "name": "body_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "inject_scopes": {
          "name": "inject_scopes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true,
          "default": "ARRAY['site']::text[]"
        },
        "enabled": {
          "name": "enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ix_analytics_tag_enabled": {
          "name": "ix_analytics_tag_enabled",
          "columns": [
            {
              "expression": "enabled",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.app_user": {
      "name": "app_user",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "telegram_id": {
          "name": "telegram_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "google_id": {
          "name": "google_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "first_name": {
          "name": "first_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_name": {
          "name": "last_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "username": {
          "name": "username",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "google_avatar": {
          "name": "google_avatar",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_media_id": {
          "name": "avatar_media_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "referral_code": {
          "name": "referral_code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "applied_referral_code": {
          "name": "applied_referral_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "referrer_id": {
          "name": "referrer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "referrer_locked": {
          "name": "referrer_locked",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_admin": {
          "name": "is_admin",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "password_hash": {
          "name": "password_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "balance": {
          "name": "balance",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "mlm_status": {
          "name": "mlm_status",
          "type": "mlm_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'customer'"
        },
        "rank": {
          "name": "rank",
          "type": "mlm_rank",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'member'"
        },
        "activated_at": {
          "name": "activated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "upgrade_deadline_at": {
          "name": "upgrade_deadline_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_login": {
          "name": "last_login",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "can_receive_firstline_bonus": {
          "name": "can_receive_firstline_bonus",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "option3_enabled": {
          "name": "option3_enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "freedom_shares": {
          "name": "freedom_shares",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[25,25,25,25]'::jsonb"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ux_app_user_telegram": {
          "name": "ux_app_user_telegram",
          "columns": [
            {
              "expression": "telegram_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ux_app_user_google": {
          "name": "ux_app_user_google",
          "columns": [
            {
              "expression": "google_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ux_app_user_email": {
          "name": "ux_app_user_email",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ux_app_user_referral_code": {
          "name": "ux_app_user_referral_code",
          "columns": [
            {
              "expression": "referral_code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_app_user_referrer": {
          "name": "ix_app_user_referrer",
          "columns": [
            {
              "expression": "referrer_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_app_user_active": {
          "name": "ix_app_user_active",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "app_user_avatar_media_id_uploaded_media_id_fk": {
          "name": "app_user_avatar_media_id_uploaded_media_id_fk",
          "tableFrom": "app_user",
          "tableTo": "uploaded_media",
          "columnsFrom": [
            "avatar_media_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "app_user_referrer_id_app_user_id_fk": {
          "name": "app_user_referrer_id_app_user_id_fk",
          "tableFrom": "app_user",
          "tableTo": "app_user",
          "columnsFrom": [
            "referrer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.blog_posts": {
      "name": "blog_posts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "excerpt": {
          "name": "excerpt",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "author": {
          "name": "author",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "publish_date": {
          "name": "publish_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "category_slug": {
          "name": "category_slug",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "custom_url": {
          "name": "custom_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "keywords": {
          "name": "keywords",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "blog_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "read_time": {
          "name": "read_time",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "images": {
          "name": "images",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "hero_media_id": {
          "name": "hero_media_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ux_blog_custom_url": {
          "name": "ux_blog_custom_url",
          "columns": [
            {
              "expression": "custom_url",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_blog_publish_date": {
          "name": "ix_blog_publish_date",
          "columns": [
            {
              "expression": "publish_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_blog_category": {
          "name": "ix_blog_category",
          "columns": [
            {
              "expression": "category_slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_blog_status": {
          "name": "ix_blog_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "blog_posts_hero_media_id_uploaded_media_id_fk": {
          "name": "blog_posts_hero_media_id_uploaded_media_id_fk",
          "tableFrom": "blog_posts",
          "tableTo": "uploaded_media",
          "columnsFrom": [
            "hero_media_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.category": {
      "name": "category",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "seo_title": {
          "name": "seo_title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "seo_description": {
          "name": "seo_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "slug": {
          "name": "slug",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "category_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "uq_category_slug": {
          "name": "uq_category_slug",
          "columns": [
            {
              "expression": "slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_category_status": {
          "name": "ix_category_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_category_name": {
          "name": "ix_category_name",
          "columns": [
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.integrations_config": {
      "name": "integrations_config",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "payments_webhook_secret": {
          "name": "payments_webhook_secret",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "payments_idempotency_header": {
          "name": "payments_idempotency_header",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "delivery_providers": {
          "name": "delivery_providers",
          "type": "delivery_service[]",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "tariff_cache_ttl_minutes": {
          "name": "tariff_cache_ttl_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "telegram_bot_token": {
          "name": "telegram_bot_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "telegram_webhook_url": {
          "name": "telegram_webhook_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tg_link_ttl_sec": {
          "name": "tg_link_ttl_sec",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ux_integrations_config_active": {
          "name": "ux_integrations_config_active",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"integrations_config\".\"is_active\" = true",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_integrations_webhook": {
          "name": "ix_integrations_webhook",
          "columns": [
            {
              "expression": "telegram_webhook_url",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.ledger_account": {
      "name": "ledger_account",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "owner_type": {
          "name": "owner_type",
          "type": "owner_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "owner_id": {
          "name": "owner_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "account_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "currency": {
          "name": "currency",
          "type": "currency",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ux_ledger_account_owner_kind": {
          "name": "ux_ledger_account_owner_kind",
          "columns": [
            {
              "expression": "owner_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "owner_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "currency",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_ledger_account_owner": {
          "name": "ix_ledger_account_owner",
          "columns": [
            {
              "expression": "owner_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "owner_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_ledger_account_type": {
          "name": "ix_ledger_account_type",
          "columns": [
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_ledger_account_currency": {
          "name": "ix_ledger_account_currency",
          "columns": [
            {
              "expression": "currency",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "ledger_account_owner_id_app_user_id_fk": {
          "name": "ledger_account_owner_id_app_user_id_fk",
          "tableFrom": "ledger_account",
          "tableTo": "app_user",
          "columnsFrom": [
            "owner_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.ledger_posting": {
      "name": "ledger_posting",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "txn_id": {
          "name": "txn_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "debit_account_id": {
          "name": "debit_account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "credit_account_id": {
          "name": "credit_account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "currency": {
          "name": "currency",
          "type": "currency",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "memo": {
          "name": "memo",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ix_posting_txn": {
          "name": "ix_posting_txn",
          "columns": [
            {
              "expression": "txn_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_posting_debit": {
          "name": "ix_posting_debit",
          "columns": [
            {
              "expression": "debit_account_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_posting_credit": {
          "name": "ix_posting_credit",
          "columns": [
            {
              "expression": "credit_account_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_posting_currency": {
          "name": "ix_posting_currency",
          "columns": [
            {
              "expression": "currency",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "ledger_posting_txn_id_ledger_txn_id_fk": {
          "name": "ledger_posting_txn_id_ledger_txn_id_fk",
          "tableFrom": "ledger_posting",
          "tableTo": "ledger_txn",
          "columnsFrom": [
            "txn_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "ledger_posting_debit_account_id_ledger_account_id_fk": {
          "name": "ledger_posting_debit_account_id_ledger_account_id_fk",
          "tableFrom": "ledger_posting",
          "tableTo": "ledger_account",
          "columnsFrom": [
            "debit_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "ledger_posting_credit_account_id_ledger_account_id_fk": {
          "name": "ledger_posting_credit_account_id_ledger_account_id_fk",
          "tableFrom": "ledger_posting",
          "tableTo": "ledger_account",
          "columnsFrom": [
            "credit_account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "chk_posting_accounts_distinct": {
          "name": "chk_posting_accounts_distinct",
          "value": "\"ledger_posting\".\"debit_account_id\" <> \"ledger_posting\".\"credit_account_id\""
        },
        "chk_posting_amount_positive": {
          "name": "chk_posting_amount_positive",
          "value": "\"ledger_posting\".\"amount\" > 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.ledger_txn": {
      "name": "ledger_txn",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "operation_id": {
          "name": "operation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "op_type": {
          "name": "op_type",
          "type": "ledger_op_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "external_ref": {
          "name": "external_ref",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "level": {
          "name": "level",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "reversal_of": {
          "name": "reversal_of",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "meta": {
          "name": "meta",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "reversed_at": {
          "name": "reversed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "reversal_txn_id": {
          "name": "reversal_txn_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ux_ledger_txn_operation": {
          "name": "ux_ledger_txn_operation",
          "columns": [
            {
              "expression": "operation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_ledger_txn_user": {
          "name": "ix_ledger_txn_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_ledger_txn_order": {
          "name": "ix_ledger_txn_order",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_ledger_txn_type": {
          "name": "ix_ledger_txn_type",
          "columns": [
            {
              "expression": "op_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_ledger_txn_reversal": {
          "name": "ix_ledger_txn_reversal",
          "columns": [
            {
              "expression": "reversal_of",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_ledger_txn_reversal_txn": {
          "name": "ix_ledger_txn_reversal_txn",
          "columns": [
            {
              "expression": "reversal_txn_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_ledger_txn_created": {
          "name": "ix_ledger_txn_created",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "ledger_txn_user_id_app_user_id_fk": {
          "name": "ledger_txn_user_id_app_user_id_fk",
          "tableFrom": "ledger_txn",
          "tableTo": "app_user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "chk_ledger_txn_level_range": {
          "name": "chk_ledger_txn_level_range",
          "value": "(\"ledger_txn\".\"level\" IS NULL) OR (\"ledger_txn\".\"level\" BETWEEN 1 AND 15)"
        }
      },
      "isRLSEnabled": false
    },
    "public.levels_matrix_versions": {
      "name": "levels_matrix_versions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "version_note": {
          "name": "version_note",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sum_mode": {
          "name": "sum_mode",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'reserve_7pct'"
        },
        "levels": {
          "name": "levels",
          "type": "numeric(6, 4)[]",
          "primaryKey": false,
          "notNull": true
        },
        "fast_levels": {
          "name": "fast_levels",
          "type": "numeric(6, 4)[]",
          "primaryKey": false,
          "notNull": true
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "activate_at": {
          "name": "activate_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "activated_by_telegram_id": {
          "name": "activated_by_telegram_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ux_lmv_active_once": {
          "name": "ux_lmv_active_once",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"levels_matrix_versions\".\"is_active\" = true",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_lmv_active": {
          "name": "ix_lmv_active",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_lmv_activate_at": {
          "name": "ix_lmv_activate_at",
          "columns": [
            {
              "expression": "activate_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "chk_lmv_levels_len": {
          "name": "chk_lmv_levels_len",
          "value": "array_length(\"levels_matrix_versions\".\"levels\", 1) = 15"
        },
        "chk_lmv_fast_len": {
          "name": "chk_lmv_fast_len",
          "value": "array_length(\"levels_matrix_versions\".\"fast_levels\", 1) = 15"
        },
        "chk_lmv_sum_mode": {
          "name": "chk_lmv_sum_mode",
          "value": "\"levels_matrix_versions\".\"sum_mode\" IN ('reserve_7pct','full')"
        }
      },
      "isRLSEnabled": false
    },
    "public.matrix_placement": {
      "name": "matrix_placement",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "parent_id": {
          "name": "parent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "position": {
          "name": "position",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sponsor_id": {
          "name": "sponsor_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "level": {
          "name": "level",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "left_leg_volume": {
          "name": "left_leg_volume",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "right_leg_volume": {
          "name": "right_leg_volume",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "left_leg_count": {
          "name": "left_leg_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "right_leg_count": {
          "name": "right_leg_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "is_active": {
          "name": "is_active",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'true'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ux_matrix_placement_user": {
          "name": "ux_matrix_placement_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_matrix_placement_parent": {
          "name": "ix_matrix_placement_parent",
          "columns": [
            {
              "expression": "parent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_matrix_placement_sponsor": {
          "name": "ix_matrix_placement_sponsor",
          "columns": [
            {
              "expression": "sponsor_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_matrix_placement_level": {
          "name": "ix_matrix_placement_level",
          "columns": [
            {
              "expression": "level",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_matrix_placement_position": {
          "name": "ix_matrix_placement_position",
          "columns": [
            {
              "expression": "parent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "position",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "matrix_placement_user_id_app_user_id_fk": {
          "name": "matrix_placement_user_id_app_user_id_fk",
          "tableFrom": "matrix_placement",
          "tableTo": "app_user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "matrix_placement_parent_id_app_user_id_fk": {
          "name": "matrix_placement_parent_id_app_user_id_fk",
          "tableFrom": "matrix_placement",
          "tableTo": "app_user",
          "columnsFrom": [
            "parent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "matrix_placement_sponsor_id_app_user_id_fk": {
          "name": "matrix_placement_sponsor_id_app_user_id_fk",
          "tableFrom": "matrix_placement",
          "tableTo": "app_user",
          "columnsFrom": [
            "sponsor_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "chk_matrix_placement_position": {
          "name": "chk_matrix_placement_position",
          "value": "\"matrix_placement\".\"position\" IS NULL OR \"matrix_placement\".\"position\" IN ('left', 'right')"
        },
        "chk_matrix_placement_level": {
          "name": "chk_matrix_placement_level",
          "value": "\"matrix_placement\".\"level\" >= 0"
        },
        "chk_matrix_placement_volumes": {
          "name": "chk_matrix_placement_volumes",
          "value": "\"matrix_placement\".\"left_leg_volume\" >= 0 AND \"matrix_placement\".\"right_leg_volume\" >= 0"
        },
        "chk_matrix_placement_counts": {
          "name": "chk_matrix_placement_counts",
          "value": "\"matrix_placement\".\"left_leg_count\" >= 0 AND \"matrix_placement\".\"right_leg_count\" >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.network_edge": {
      "name": "network_edge",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "parent_id": {
          "name": "parent_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "child_id": {
          "name": "child_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ux_network_edge_pair": {
          "name": "ux_network_edge_pair",
          "columns": [
            {
              "expression": "parent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "child_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ux_network_edge_child": {
          "name": "ux_network_edge_child",
          "columns": [
            {
              "expression": "child_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_network_edge_parent": {
          "name": "ix_network_edge_parent",
          "columns": [
            {
              "expression": "parent_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_network_edge_child": {
          "name": "ix_network_edge_child",
          "columns": [
            {
              "expression": "child_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "network_edge_parent_id_app_user_id_fk": {
          "name": "network_edge_parent_id_app_user_id_fk",
          "tableFrom": "network_edge",
          "tableTo": "app_user",
          "columnsFrom": [
            "parent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "network_edge_child_id_app_user_id_fk": {
          "name": "network_edge_child_id_app_user_id_fk",
          "tableFrom": "network_edge",
          "tableTo": "app_user",
          "columnsFrom": [
            "child_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "chk_network_no_self_link": {
          "name": "chk_network_no_self_link",
          "value": "\"network_edge\".\"parent_id\" <> \"network_edge\".\"child_id\""
        }
      },
      "isRLSEnabled": false
    },
    "public.notification": {
      "name": "notification",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "channel": {
          "name": "channel",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "sent_at": {
          "name": "sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "ix_notification_order": {
          "name": "ix_notification_order",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_notification_user": {
          "name": "ix_notification_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_notification_status": {
          "name": "ix_notification_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_notification_channel": {
          "name": "ix_notification_channel",
          "columns": [
            {
              "expression": "channel",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_notification_created": {
          "name": "ix_notification_created",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "notification_user_id_app_user_id_fk": {
          "name": "notification_user_id_app_user_id_fk",
          "tableFrom": "notification",
          "tableTo": "app_user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "notification_order_id_order_id_fk": {
          "name": "notification_order_id_order_id_fk",
          "tableFrom": "notification",
          "tableTo": "order",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.order": {
      "name": "order",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "order_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "delivery_status": {
          "name": "delivery_status",
          "type": "delivery_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'not_required'"
        },
        "items_subtotal_rub": {
          "name": "items_subtotal_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "discount_total_rub": {
          "name": "discount_total_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "order_base_rub": {
          "name": "order_base_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "total_payable_rub": {
          "name": "total_payable_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "pv_earned": {
          "name": "pv_earned",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "vwc_cashback": {
          "name": "vwc_cashback",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "network_fund_rub": {
          "name": "network_fund_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "payment_method": {
          "name": "payment_method",
          "type": "payment_method",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "promo_code": {
          "name": "promo_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "promo_discount_rub": {
          "name": "promo_discount_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "comment": {
          "name": "comment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "delivery_required": {
          "name": "delivery_required",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "delivery_service": {
          "name": "delivery_service",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "delivery_fee_rub": {
          "name": "delivery_fee_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "delivery_address": {
          "name": "delivery_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "delivery_tracking_code": {
          "name": "delivery_tracking_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "delivered_at": {
          "name": "delivered_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "idempotency_key": {
          "name": "idempotency_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ix_order_user": {
          "name": "ix_order_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_order_delivered_at": {
          "name": "ix_order_delivered_at",
          "columns": [
            {
              "expression": "delivered_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_order_created_at": {
          "name": "ix_order_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_order_idempotency_key": {
          "name": "ix_order_idempotency_key",
          "columns": [
            {
              "expression": "idempotency_key",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "order_user_id_app_user_id_fk": {
          "name": "order_user_id_app_user_id_fk",
          "tableFrom": "order",
          "tableTo": "app_user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "chk_order_subtotal": {
          "name": "chk_order_subtotal",
          "value": "\"order\".\"items_subtotal_rub\" >= 0"
        },
        "chk_order_discount": {
          "name": "chk_order_discount",
          "value": "\"order\".\"discount_total_rub\" >= 0"
        },
        "chk_order_base": {
          "name": "chk_order_base",
          "value": "\"order\".\"order_base_rub\" >= 0"
        },
        "chk_order_total": {
          "name": "chk_order_total",
          "value": "\"order\".\"total_payable_rub\" >= 0"
        },
        "chk_order_pv_earned": {
          "name": "chk_order_pv_earned",
          "value": "\"order\".\"pv_earned\" >= 0"
        },
        "chk_promo_discount_nonneg": {
          "name": "chk_promo_discount_nonneg",
          "value": "\"order\".\"promo_discount_rub\" >= 0"
        },
        "chk_delivery_fee_nonneg": {
          "name": "chk_delivery_fee_nonneg",
          "value": "\"order\".\"delivery_fee_rub\" >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.order_item": {
      "name": "order_item",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_name": {
          "name": "product_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "product_slug": {
          "name": "product_slug",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "image_url": {
          "name": "image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "category_id": {
          "name": "category_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "sku": {
          "name": "sku",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "qty": {
          "name": "qty",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "unit_price_rub": {
          "name": "unit_price_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "line_subtotal_rub": {
          "name": "line_subtotal_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "line_discount_rub": {
          "name": "line_discount_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "line_total_rub": {
          "name": "line_total_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "is_pv_eligible": {
          "name": "is_pv_eligible",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "is_free": {
          "name": "is_free",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "pv_each": {
          "name": "pv_each",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "pv_total": {
          "name": "pv_total",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ix_order_item_order": {
          "name": "ix_order_item_order",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_order_item_product": {
          "name": "ix_order_item_product",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "order_item_order_id_order_id_fk": {
          "name": "order_item_order_id_order_id_fk",
          "tableFrom": "order_item",
          "tableTo": "order",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "order_item_product_id_product_id_fk": {
          "name": "order_item_product_id_product_id_fk",
          "tableFrom": "order_item",
          "tableTo": "product",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "chk_order_item_qty": {
          "name": "chk_order_item_qty",
          "value": "\"order_item\".\"qty\" > 0"
        },
        "chk_order_item_unit_price": {
          "name": "chk_order_item_unit_price",
          "value": "\"order_item\".\"unit_price_rub\" >= 0"
        },
        "chk_order_item_pv_each": {
          "name": "chk_order_item_pv_each",
          "value": "\"order_item\".\"pv_each\" >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.order_log": {
      "name": "order_log",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "event": {
          "name": "event",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "meta": {
          "name": "meta",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ix_order_log_order": {
          "name": "ix_order_log_order",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_order_log_time": {
          "name": "ix_order_log_time",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "order_log_order_id_order_id_fk": {
          "name": "order_log_order_id_order_id_fk",
          "tableFrom": "order_log",
          "tableTo": "order",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.payment": {
      "name": "payment",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "method": {
          "name": "method",
          "type": "payment_method",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "payment_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "amount_rub": {
          "name": "amount_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "currency": {
          "name": "currency",
          "type": "currency",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'RUB'"
        },
        "external_id": {
          "name": "external_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "error_code": {
          "name": "error_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "authorized_at": {
          "name": "authorized_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "captured_at": {
          "name": "captured_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "refunded_at": {
          "name": "refunded_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ix_payment_order": {
          "name": "ix_payment_order",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_payment_status": {
          "name": "ix_payment_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ux_payment_external_id": {
          "name": "ux_payment_external_id",
          "columns": [
            {
              "expression": "external_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"payment\".\"external_id\" IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "payment_order_id_order_id_fk": {
          "name": "payment_order_id_order_id_fk",
          "tableFrom": "payment",
          "tableTo": "order",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "chk_payment_amount_positive": {
          "name": "chk_payment_amount_positive",
          "value": "\"payment\".\"amount_rub\" > 0"
        },
        "chk_payment_currency_rub": {
          "name": "chk_payment_currency_rub",
          "value": "\"payment\".\"currency\" = 'RUB'"
        }
      },
      "isRLSEnabled": false
    },
    "public.pro_assignment_pool": {
      "name": "pro_assignment_pool",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "telegram_id": {
          "name": "telegram_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ux_pro_assignment_pool_telegram": {
          "name": "ux_pro_assignment_pool_telegram",
          "columns": [
            {
              "expression": "telegram_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.product": {
      "name": "product",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "long_description": {
          "name": "long_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "seo_title": {
          "name": "seo_title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "seo_description": {
          "name": "seo_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "price": {
          "name": "price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "original_price": {
          "name": "original_price",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "stock": {
          "name": "stock",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "sku": {
          "name": "sku",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "category_id": {
          "name": "category_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "capsule_count": {
          "name": "capsule_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "capsule_volume": {
          "name": "capsule_volume",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "servings_per_container": {
          "name": "servings_per_container",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "manufacturer": {
          "name": "manufacturer",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "country_of_origin": {
          "name": "country_of_origin",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expiration_date": {
          "name": "expiration_date",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "storage_conditions": {
          "name": "storage_conditions",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "usage": {
          "name": "usage",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "additional_info": {
          "name": "additional_info",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "composition": {
          "name": "composition",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "seo_keywords": {
          "name": "seo_keywords",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "how_to_take": {
          "name": "how_to_take",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "benefits": {
          "name": "benefits",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "is_pv_eligible": {
          "name": "is_pv_eligible",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "custom_pv": {
          "name": "custom_pv",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "custom_cashback": {
          "name": "custom_cashback",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "images": {
          "name": "images",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::jsonb"
        },
        "status": {
          "name": "status",
          "type": "product_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'draft'"
        },
        "ui_status": {
          "name": "ui_status",
          "type": "ui_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "uq_product_slug": {
          "name": "uq_product_slug",
          "columns": [
            {
              "expression": "slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ux_product_sku_nullable": {
          "name": "ux_product_sku_nullable",
          "columns": [
            {
              "expression": "sku",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"product\".\"sku\" IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_product_category_id": {
          "name": "ix_product_category_id",
          "columns": [
            {
              "expression": "category_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_product_status": {
          "name": "ix_product_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_product_ui_status": {
          "name": "ix_product_ui_status",
          "columns": [
            {
              "expression": "ui_status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_product_status_ui": {
          "name": "ix_product_status_ui",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "ui_status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_product_name": {
          "name": "ix_product_name",
          "columns": [
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_product_price": {
          "name": "ix_product_price",
          "columns": [
            {
              "expression": "price",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "product_category_id_category_id_fk": {
          "name": "product_category_id_category_id_fk",
          "tableFrom": "product",
          "tableTo": "category",
          "columnsFrom": [
            "category_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "chk_product_price_nonneg": {
          "name": "chk_product_price_nonneg",
          "value": "\"product\".\"price\" >= 0"
        },
        "chk_product_stock_nonneg": {
          "name": "chk_product_stock_nonneg",
          "value": "\"product\".\"stock\" >= 0"
        },
        "chk_product_custom_pv_nonneg": {
          "name": "chk_product_custom_pv_nonneg",
          "value": "\"product\".\"custom_pv\" IS NULL OR \"product\".\"custom_pv\" >= 0"
        },
        "chk_product_cashback_0_100": {
          "name": "chk_product_cashback_0_100",
          "value": "\"product\".\"custom_cashback\" IS NULL OR (\"product\".\"custom_cashback\" >= 0 AND \"product\".\"custom_cashback\" <= 100)"
        }
      },
      "isRLSEnabled": false
    },
    "public.promo_code": {
      "name": "promo_code",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "percent_off": {
          "name": "percent_off",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "fixed_amount_rub": {
          "name": "fixed_amount_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "min_order_rub": {
          "name": "min_order_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "max_uses": {
          "name": "max_uses",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "current_uses": {
          "name": "current_uses",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "one_per_user": {
          "name": "one_per_user",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "starts_at": {
          "name": "starts_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ux_promo_code_code": {
          "name": "ux_promo_code_code",
          "columns": [
            {
              "expression": "code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_promo_code_active": {
          "name": "ix_promo_code_active",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_promo_code_expiry": {
          "name": "ix_promo_code_expiry",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "chk_promo_code_type": {
          "name": "chk_promo_code_type",
          "value": "\"promo_code\".\"type\" IN ('percent_off', 'fixed_amount')"
        },
        "chk_promo_code_percent_range": {
          "name": "chk_promo_code_percent_range",
          "value": "\"promo_code\".\"percent_off\" IS NULL OR (\"promo_code\".\"percent_off\" >= 0 AND \"promo_code\".\"percent_off\" <= 100)"
        },
        "chk_promo_code_fixed_nonneg": {
          "name": "chk_promo_code_fixed_nonneg",
          "value": "\"promo_code\".\"fixed_amount_rub\" IS NULL OR \"promo_code\".\"fixed_amount_rub\" >= 0"
        },
        "chk_promo_code_min_order_nonneg": {
          "name": "chk_promo_code_min_order_nonneg",
          "value": "\"promo_code\".\"min_order_rub\" >= 0"
        },
        "chk_promo_code_uses_nonneg": {
          "name": "chk_promo_code_uses_nonneg",
          "value": "\"promo_code\".\"max_uses\" IS NULL OR \"promo_code\".\"max_uses\" >= 0"
        },
        "chk_promo_code_current_uses_nonneg": {
          "name": "chk_promo_code_current_uses_nonneg",
          "value": "\"promo_code\".\"current_uses\" >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.promo_code_usage": {
      "name": "promo_code_usage",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "promo_code_id": {
          "name": "promo_code_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "discount_rub": {
          "name": "discount_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ix_promo_code_usage_promo": {
          "name": "ix_promo_code_usage_promo",
          "columns": [
            {
              "expression": "promo_code_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_promo_code_usage_user": {
          "name": "ix_promo_code_usage_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_promo_code_usage_order": {
          "name": "ix_promo_code_usage_order",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ux_promo_code_usage_order_promo": {
          "name": "ux_promo_code_usage_order_promo",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "promo_code_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "promo_code_usage_promo_code_id_promo_code_id_fk": {
          "name": "promo_code_usage_promo_code_id_promo_code_id_fk",
          "tableFrom": "promo_code_usage",
          "tableTo": "promo_code",
          "columnsFrom": [
            "promo_code_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.promotion": {
      "name": "promotion",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "kind": {
          "name": "kind",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "starts_at": {
          "name": "starts_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "ends_at": {
          "name": "ends_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "buy_qty": {
          "name": "buy_qty",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "get_qty": {
          "name": "get_qty",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "percent_off": {
          "name": "percent_off",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "fixed_price_rub": {
          "name": "fixed_price_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "ix_promo_active_time": {
          "name": "ix_promo_active_time",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "starts_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "ends_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "chk_promo_percent_range": {
          "name": "chk_promo_percent_range",
          "value": "\"promotion\".\"percent_off\" IS NULL OR (\"promotion\".\"percent_off\" >= 0 AND \"promotion\".\"percent_off\" <= 100)"
        },
        "chk_promo_buy_get_positive": {
          "name": "chk_promo_buy_get_positive",
          "value": "(\"promotion\".\"buy_qty\" IS NULL AND \"promotion\".\"get_qty\" IS NULL)\n            OR (\"promotion\".\"buy_qty\" IS NOT NULL AND \"promotion\".\"buy_qty\" > 0 AND \"promotion\".\"get_qty\" IS NOT NULL AND \"promotion\".\"get_qty\" > 0)"
        },
        "chk_promo_fixed_price_nonneg": {
          "name": "chk_promo_fixed_price_nonneg",
          "value": "\"promotion\".\"fixed_price_rub\" IS NULL OR \"promotion\".\"fixed_price_rub\" >= 0"
        },
        "chk_promo_period_order": {
          "name": "chk_promo_period_order",
          "value": "(\"promotion\".\"starts_at\" IS NULL OR \"promotion\".\"ends_at\" IS NULL) OR (\"promotion\".\"ends_at\" > \"promotion\".\"starts_at\")"
        }
      },
      "isRLSEnabled": false
    },
    "public.promotion_product": {
      "name": "promotion_product",
      "schema": "",
      "columns": {
        "promotion_id": {
          "name": "promotion_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "product_id": {
          "name": "product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "ix_promo_product_promotion": {
          "name": "ix_promo_product_promotion",
          "columns": [
            {
              "expression": "promotion_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_promo_product_product": {
          "name": "ix_promo_product_product",
          "columns": [
            {
              "expression": "product_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "promotion_product_promotion_id_promotion_id_fk": {
          "name": "promotion_product_promotion_id_promotion_id_fk",
          "tableFrom": "promotion_product",
          "tableTo": "promotion",
          "columnsFrom": [
            "promotion_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "promotion_product_product_id_product_id_fk": {
          "name": "promotion_product_product_id_product_id_fk",
          "tableFrom": "promotion_product",
          "tableTo": "product",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "pk_promotion_product": {
          "name": "pk_promotion_product",
          "columns": [
            "promotion_id",
            "product_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.rank_rules": {
      "name": "rank_rules",
      "schema": "",
      "columns": {
        "rank": {
          "name": "rank",
          "type": "mlm_rank",
          "typeSchema": "public",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "required_pv": {
          "name": "required_pv",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "required_turnover": {
          "name": "required_turnover",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "bonus_percent": {
          "name": "bonus_percent",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "required_lo": {
          "name": "required_lo",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "required_active_partners": {
          "name": "required_active_partners",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "required_branches": {
          "name": "required_branches",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "hold_months": {
          "name": "hold_months",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "is_creator": {
          "name": "is_creator",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ix_rank_rules_is_creator": {
          "name": "ix_rank_rules_is_creator",
          "columns": [
            {
              "expression": "is_creator",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "chk_rank_rules_bonus_percent_range": {
          "name": "chk_rank_rules_bonus_percent_range",
          "value": "\"rank_rules\".\"bonus_percent\" IS NULL OR (\"rank_rules\".\"bonus_percent\" >= 0 AND \"rank_rules\".\"bonus_percent\" <= 100)"
        },
        "chk_rank_rules_non_negative_nums": {
          "name": "chk_rank_rules_non_negative_nums",
          "value": "COALESCE(\"rank_rules\".\"required_pv\", 0) >= 0\n        AND COALESCE(\"rank_rules\".\"required_turnover\", 0) >= 0\n        AND COALESCE(\"rank_rules\".\"required_lo\", 0) >= 0"
        },
        "chk_rank_rules_non_negative_ints": {
          "name": "chk_rank_rules_non_negative_ints",
          "value": "COALESCE(\"rank_rules\".\"required_active_partners\", 0) >= 0\n        AND COALESCE(\"rank_rules\".\"required_branches\", 0) >= 0\n        AND COALESCE(\"rank_rules\".\"hold_months\", 0) >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.settings": {
      "name": "settings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "key": {
          "name": "key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "value_json": {
          "name": "value_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "effective_from": {
          "name": "effective_from",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ix_settings_key": {
          "name": "ix_settings_key",
          "columns": [
            {
              "expression": "key",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_settings_key_effective": {
          "name": "ix_settings_key_effective",
          "columns": [
            {
              "expression": "key",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "effective_from",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ux_settings_key_effective": {
          "name": "ux_settings_key_effective",
          "columns": [
            {
              "expression": "key",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "effective_from",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.settlement_settings": {
      "name": "settlement_settings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "referral_discount_percent": {
          "name": "referral_discount_percent",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'10'"
        },
        "network_fund_percent": {
          "name": "network_fund_percent",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'50'"
        },
        "vwc_cashback_percent": {
          "name": "vwc_cashback_percent",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'5'"
        },
        "free_shipping_threshold_rub": {
          "name": "free_shipping_threshold_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'7500'"
        },
        "delivery_base_price_rub": {
          "name": "delivery_base_price_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "pv_rub_per_pv": {
          "name": "pv_rub_per_pv",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'200'"
        },
        "rounding_money": {
          "name": "rounding_money",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'half_up'"
        },
        "rounding_pv": {
          "name": "rounding_pv",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'floor'"
        },
        "calc_timezone": {
          "name": "calc_timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'Europe/Moscow'"
        },
        "is_compression_enabled": {
          "name": "is_compression_enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "fast_start_weeks": {
          "name": "fast_start_weeks",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 8
        },
        "fast_start_start_point": {
          "name": "fast_start_start_point",
          "type": "fast_start_point",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'activation'"
        },
        "infinity_rate": {
          "name": "infinity_rate",
          "type": "numeric(6, 4)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0.0025'"
        },
        "option_bonus_percent": {
          "name": "option_bonus_percent",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'3'"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ux_settlement_settings_active": {
          "name": "ux_settlement_settings_active",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"settlement_settings\".\"is_active\" = true",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_settlement_settings_tz": {
          "name": "ix_settlement_settings_tz",
          "columns": [
            {
              "expression": "calc_timezone",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "chk_settle_ref_disc": {
          "name": "chk_settle_ref_disc",
          "value": "\"settlement_settings\".\"referral_discount_percent\" >= 0 AND \"settlement_settings\".\"referral_discount_percent\" <= 100"
        },
        "chk_settle_net_fund": {
          "name": "chk_settle_net_fund",
          "value": "\"settlement_settings\".\"network_fund_percent\"     >= 0 AND \"settlement_settings\".\"network_fund_percent\"     <= 100"
        },
        "chk_settle_vwc_cash": {
          "name": "chk_settle_vwc_cash",
          "value": "\"settlement_settings\".\"vwc_cashback_percent\"     >= 0 AND \"settlement_settings\".\"vwc_cashback_percent\"     <= 100"
        },
        "chk_settle_opt_bonus": {
          "name": "chk_settle_opt_bonus",
          "value": "\"settlement_settings\".\"option_bonus_percent\"     >= 0 AND \"settlement_settings\".\"option_bonus_percent\"     <= 100"
        },
        "chk_settle_infinity": {
          "name": "chk_settle_infinity",
          "value": "\"settlement_settings\".\"infinity_rate\" >= 0 AND \"settlement_settings\".\"infinity_rate\" <= 1"
        },
        "chk_settle_money_nonneg": {
          "name": "chk_settle_money_nonneg",
          "value": "\"settlement_settings\".\"free_shipping_threshold_rub\" >= 0 AND \"settlement_settings\".\"delivery_base_price_rub\" >= 0"
        },
        "chk_settle_fast_weeks": {
          "name": "chk_settle_fast_weeks",
          "value": "\"settlement_settings\".\"fast_start_weeks\" BETWEEN 1 AND 52"
        },
        "chk_settle_rounding_money": {
          "name": "chk_settle_rounding_money",
          "value": "\"settlement_settings\".\"rounding_money\" IN ('half_up','half_even')"
        },
        "chk_settle_rounding_pv": {
          "name": "chk_settle_rounding_pv",
          "value": "\"settlement_settings\".\"rounding_pv\" IN ('floor','round')"
        }
      },
      "isRLSEnabled": false
    },
    "public.uploaded_media": {
      "name": "uploaded_media",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "public_id": {
          "name": "public_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "format": {
          "name": "format",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "width": {
          "name": "width",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "height": {
          "name": "height",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "bytes": {
          "name": "bytes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "meta": {
          "name": "meta",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ix_uploaded_media_url": {
          "name": "ix_uploaded_media_url",
          "columns": [
            {
              "expression": "url",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_uploaded_media_user": {
          "name": "ix_uploaded_media_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ux_uploaded_media_public": {
          "name": "ux_uploaded_media_public",
          "columns": [
            {
              "expression": "public_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "uploaded_media_user_id_app_user_id_fk": {
          "name": "uploaded_media_user_id_app_user_id_fk",
          "tableFrom": "uploaded_media",
          "tableTo": "app_user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "chk_uploaded_media_positive": {
          "name": "chk_uploaded_media_positive",
          "value": "COALESCE(\"uploaded_media\".\"width\", 0) >= 0\n            AND COALESCE(\"uploaded_media\".\"height\", 0) >= 0\n            AND COALESCE(\"uploaded_media\".\"bytes\", 0) >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.user_activity_log": {
      "name": "user_activity_log",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "meta": {
          "name": "meta",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ix_user_activity_user": {
          "name": "ix_user_activity_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_user_activity_time": {
          "name": "ix_user_activity_time",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_activity_log_user_id_app_user_id_fk": {
          "name": "user_activity_log_user_id_app_user_id_fk",
          "tableFrom": "user_activity_log",
          "tableTo": "app_user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.withdrawal_request": {
      "name": "withdrawal_request",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "amount_rub": {
          "name": "amount_rub",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "withdrawal_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "method": {
          "name": "method",
          "type": "payment_method",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "payload": {
          "name": "payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ix_withdrawal_user": {
          "name": "ix_withdrawal_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_withdrawal_status": {
          "name": "ix_withdrawal_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "withdrawal_request_user_id_app_user_id_fk": {
          "name": "withdrawal_request_user_id_app_user_id_fk",
          "tableFrom": "withdrawal_request",
          "tableTo": "app_user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "chk_withdrawal_amount_pos": {
          "name": "chk_withdrawal_amount_pos",
          "value": "\"withdrawal_request\".\"amount_rub\" > 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.user_bonus_preferences": {
      "name": "user_bonus_preferences",
      "schema": "",
      "columns": {
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "health_percent": {
          "name": "health_percent",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 25
        },
        "travel_percent": {
          "name": "travel_percent",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 25
        },
        "home_percent": {
          "name": "home_percent",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 25
        },
        "auto_percent": {
          "name": "auto_percent",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 25
        },
        "is_locked": {
          "name": "is_locked",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "user_bonus_preferences_user_id_app_user_id_fk": {
          "name": "user_bonus_preferences_user_id_app_user_id_fk",
          "tableFrom": "user_bonus_preferences",
          "tableTo": "app_user",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "user_bonus_preferences_user_id_pk": {
          "name": "user_bonus_preferences_user_id_pk",
          "columns": [
            "user_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.account_type": {
      "name": "account_type",
      "schema": "public",
      "values": [
        "cash_rub",
        "pv",
        "vwc",
        "referral",
        "reserve_special",
        "network_fund"
      ]
    },
    "public.address_type": {
      "name": "address_type",
      "schema": "public",
      "values": [
        "home",
        "work"
      ]
    },
    "public.airdrop_check_type": {
      "name": "airdrop_check_type",
      "schema": "public",
      "values": [
        "tg_channel_sub",
        "custom"
      ]
    },
    "public.airdrop_trigger": {
      "name": "airdrop_trigger",
      "schema": "public",
      "values": [
        "tg_channel_sub",
        "custom"
      ]
    },
    "public.blog_status": {
      "name": "blog_status",
      "schema": "public",
      "values": [
        "published",
        "draft"
      ]
    },
    "public.category_status": {
      "name": "category_status",
      "schema": "public",
      "values": [
        "active",
        "inactive"
      ]
    },
    "public.currency": {
      "name": "currency",
      "schema": "public",
      "values": [
        "RUB",
        "VWC",
        "PV"
      ]
    },
    "public.delivery_service": {
      "name": "delivery_service",
      "schema": "public",
      "values": [
        "sdek",
        "russianpost",
        "yandex"
      ]
    },
    "public.delivery_status": {
      "name": "delivery_status",
      "schema": "public",
      "values": [
        "not_required",
        "pending",
        "in_transit",
        "delivered",
        "lost",
        "returned"
      ]
    },
    "public.discount_type": {
      "name": "discount_type",
      "schema": "public",
      "values": [
        "line_item",
        "cart_fixed",
        "cart_percent",
        "referral_10"
      ]
    },
    "public.fast_start_point": {
      "name": "fast_start_point",
      "schema": "public",
      "values": [
        "registration",
        "first_paid",
        "activation"
      ]
    },
    "public.ledger_op_type": {
      "name": "ledger_op_type",
      "schema": "public",
      "values": [
        "order_accrual",
        "order_payment",
        "refund",
        "reward",
        "transfer",
        "fast_start",
        "infinity",
        "option_bonus",
        "activation_bonus",
        "first_pool",
        "airdrop",
        "achievement",
        "adjustment",
        "withdrawal_request",
        "withdrawal_payout",
        "cashback",
        "network_bonus",
        "referral_bonus",
        "network_fund_allocation"
      ]
    },
    "public.mlm_rank": {
      "name": "mlm_rank",
      "schema": "public",
      "values": [
        "member",
        "лидер",
        "создатель"
      ]
    },
    "public.mlm_status": {
      "name": "mlm_status",
      "schema": "public",
      "values": [
        "customer",
        "partner",
        "partner_pro"
      ]
    },
    "public.notification_channel": {
      "name": "notification_channel",
      "schema": "public",
      "values": [
        "email",
        "telegram",
        "push"
      ]
    },
    "public.notification_event": {
      "name": "notification_event",
      "schema": "public",
      "values": [
        "order_created",
        "order_paid",
        "order_shipped",
        "withdrawal_requested",
        "withdrawal_approved",
        "airdrop_completed"
      ]
    },
    "public.notification_status": {
      "name": "notification_status",
      "schema": "public",
      "values": [
        "pending",
        "sent",
        "failed"
      ]
    },
    "public.order_status": {
      "name": "order_status",
      "schema": "public",
      "values": [
        "new",
        "pending",
        "paid",
        "shipped",
        "delivered",
        "canceled",
        "returned_partial",
        "returned_full"
      ]
    },
    "public.owner_type": {
      "name": "owner_type",
      "schema": "public",
      "values": [
        "user",
        "system"
      ]
    },
    "public.payment_method": {
      "name": "payment_method",
      "schema": "public",
      "values": [
        "card",
        "sbp",
        "wallet",
        "cash",
        "promo"
      ]
    },
    "public.payment_status": {
      "name": "payment_status",
      "schema": "public",
      "values": [
        "init",
        "awaiting",
        "authorized",
        "captured",
        "refunded",
        "failed"
      ]
    },
    "public.product_status": {
      "name": "product_status",
      "schema": "public",
      "values": [
        "active",
        "draft",
        "archived"
      ]
    },
    "public.rbac_role": {
      "name": "rbac_role",
      "schema": "public",
      "values": [
        "admin",
        "finance",
        "support",
        "editor"
      ]
    },
    "public.ui_status": {
      "name": "ui_status",
      "schema": "public",
      "values": [
        "active",
        "inactive"
      ]
    },
    "public.withdrawal_status": {
      "name": "withdrawal_status",
      "schema": "public",
      "values": [
        "requested",
        "in_review",
        "approved",
        "rejected",
        "paid",
        "canceled"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}